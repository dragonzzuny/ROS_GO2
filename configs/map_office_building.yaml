# Reviewer: 박용준
# Office Building Map - 사무실 건물 (90m x 70m)
# 목적: 방, 복도, 로비 등 복잡한 실내 공간
# 면적: 6,300㎡ (약 1,900평)

env:
  map_width: 90.0
  map_height: 70.0

  # Occupancy grid resolution (meters per cell)
  grid_resolution: 0.5

  # Walls and obstacles (list of polygons, each polygon is list of [x, y] vertices)
  # 벽/장애물: 사무실, 회의실, 복도 구획
  walls:
    # Office room A (사무실 A)
    - [[50.0, 20.0], [65.0, 20.0], [65.0, 30.0], [50.0, 30.0]]
    # Office room B (사무실 B)
    - [[15.0, 40.0], [28.0, 40.0], [28.0, 50.0], [15.0, 50.0]]
    # Meeting room 1 (회의실 1)
    - [[50.0, 45.0], [62.0, 45.0], [62.0, 52.0], [50.0, 52.0]]
    # Meeting room 2 (회의실 2)
    - [[70.0, 45.0], [82.0, 45.0], [82.0, 52.0], [70.0, 52.0]]
    # Reception desk (안내 데스크)
    - [[42.0, 12.0], [48.0, 12.0], [48.0, 18.0], [42.0, 18.0]]
    # Rest area (휴게실 장애물)
    - [[28.0, 58.0], [35.0, 58.0], [35.0, 63.0], [28.0, 63.0]]
    # Central pillar cluster (중앙 기둥군)
    - [[38.0, 33.0], [40.0, 33.0], [40.0, 37.0], [38.0, 37.0]]
    - [[52.0, 33.0], [54.0, 33.0], [54.0, 37.0], [52.0, 37.0]]

  # 14개 포인트 - 로비, 복도, 사무실 구역 등
  # Reviewer 박용준: Fixed patrol points to be outside rooms
  patrol_points:
    # 로비 구역
    - [15.0, 15.0]   # P0: 정문 입구
    - [30.0, 15.0]   # P1: 로비 중앙
    - [45.0, 15.0]   # P2: 안내데스크

    # 1층 복도 (동쪽)
    - [60.0, 15.0]   # P3: 복도 시작
    - [75.0, 15.0]   # P4: 복도 중간
    - [75.0, 30.0]   # P5: 동쪽 코너

    # 사무실 구역 - Fixed: moved outside Meeting room 2
    - [75.0, 43.0]   # P6: 사무실 A (회의실 밖 아래쪽)
    - [75.0, 55.0]   # P7: 사무실 B
    - [60.0, 55.0]   # P8: 회의실 구역

    # 서쪽 복도
    - [45.0, 55.0]   # P9: 서쪽 복도
    - [30.0, 55.0]   # P10: 휴게실
    - [15.0, 55.0]   # P11: 비상구

    # 중앙 통로
    - [30.0, 35.0]   # P12: 중앙 홀
    - [60.0, 35.0]   # P13: 중앙 교차로

  patrol_point_priorities:
    - 2.0  # 정문 (매우 중요)
    - 1.8  # 로비 (중요)
    - 1.5  # 안내데스크
    - 1.0  # 일반 복도
    - 1.0
    - 1.2  # 코너
    - 1.1  # 사무실 구역
    - 1.1
    - 1.3  # 회의실
    - 1.0  # 서쪽 복도
    - 0.9  # 휴게실 (덜 중요)
    - 1.6  # 비상구 (중요)
    - 1.4  # 중앙 홀 (중요)
    - 1.5  # 중앙 교차로 (중요)

  # Charging station - 정문 입구 근처
  charging_station_position: [10.0, 10.0]

  max_episode_steps: 320
  max_episode_time: 1000.0  # 약 16분

  event_generation_rate: 14.0  # 사람이 많아서 이벤트 많음
  event_min_urgency: 0.3
  event_max_urgency: 1.0
  event_min_confidence: 0.6

  robot_max_velocity: 1.2  # 실내라서 느리게
  robot_max_angular_velocity: 1.0
  robot_battery_capacity: 200.0
  robot_battery_drain_rate: 24.0

  num_candidates: 10
  candidate_strategies:
    - "keep_order"
    - "nearest_first"
    - "most_overdue_first"
    - "overdue_eta_balance"
    - "risk_weighted"
    - "balanced_coverage"
    - "overdue_threshold_first"
    - "windowed_replan"
    - "minimal_deviation_insert"
    - "shortest_eta_first"

reward:
  w_event: 1.2  # 사무실이라 이벤트 대응 더 중요
  w_patrol: 0.5
  w_safety: 2.5  # 사람이 많아서 안전 매우 중요
  w_efficiency: 0.1

  event_response_bonus: 65.0  # 빠른 대응 중요
  event_delay_penalty_rate: 0.7
  event_max_delay: 120.0

  patrol_gap_penalty_rate: 0.1
  patrol_visit_bonus: 2.2

  collision_penalty: -150.0  # 사람 많아서 충돌 페널티 크게
  nav_failure_penalty: -25.0

  distance_penalty_rate: 0.012  # 실내라서 효율성 중요
